/*! jQuery tinyMap v3.4.2, Licensed MIT (c) essoduke.org | https://code.essoduke.org/tinyMap/ */
window.gMapsCallback=function(){$(window).trigger("gMapsCallback")};
(function(h,u,r,J){function z(a){var b,c;if(a instanceof Array)for(b=0;b<a.length;b+=1)z(a[b]);else if("object"===typeof a)for(b in a)"string"!==typeof a[b]?z(a[b]):/^google\.map/gi.test(a[b])&&(c=a[b].split("."),4===c.length&&(a[b]=google.maps[c[2]][c[3]]))}function t(a,b){var c={lat:"",lng:""},d,e=/^[+-]?\d+(\.\d+)?$/;if("string"===typeof a||Array.isArray(a))if(d=Array.isArray(a)?a:a.toString().replace(/\s+/,"").split(","),2===d.length)e.test(d[0])&&e.test(d[1])&&(c.lat=d[0],c.lng=d[1]);else return a;
else if("object"===typeof a){if("function"===typeof a.lat)return a;a.hasOwnProperty("x")&&a.hasOwnProperty("y")?(c.lat=a.x,c.lng=a.y):a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(c.lat=a.lat,c.lng=a.lng)}return!0===b?new google.maps.LatLng(c.lat,c.lng):c}function w(a){var b=a.hasOwnProperty("css")?a.css.toString():"";this.setValues(a);this.span=h("<span/>").css({position:"relative",left:"-50%",top:"0","white-space":"nowrap"}).addClass(b);this.div=h("<div/>").css({position:"absolute",display:"none"});
this.span.appendTo(this.div)}function A(a,b){var c=this,d=h.extend({},I,b);c.idleOnceCount=!1;c.map=null;c._markers=[];c._markersCluster=[];c._clusters={};c._bounds={};c._labels=[];c._polylines=[];c._polygons=[];c._circles=[];c._kmls=[];c._directions=[];c._directionsMarkers=[];c._places=[];c.container=a;c.options=d;c.googleMapOptions={};c.interval=parseInt(c.options.interval,10)||200;h(u).on("gMapsCallback",function(){c.init()});h(this.container).html(d.loading);return c.init()}var F=!1,G=!1,H=!1,
x={language:"zh-TW",callback:"gMapsCallback",api:"https://maps.googleapis.com/maps/api/js",clusterer:"https://cdn.essoduke.org/js/tinyMap/markerclusterer.js",withLabel:"https://cdn.essoduke.org/js/tinyMap/markerwithlabel.js"},I={autoLocation:!1,center:[24,121],infoWindowAutoClose:!0,interval:200,loading:"\u8b80\u53d6\u4e2d&hellip;",notFound:"\u627e\u4e0d\u5230\u67e5\u8a62\u7684\u5730\u9ede",zoom:8},B={},B={greyscale:[{featureType:"all",stylers:[{saturation:-100},{gamma:.5}]}]};A.prototype={VERSION:"3.4.0",
formatSize:function(a){return Array.isArray(a)&&2===a.length?new google.maps.Size(a[0],a[1]):a},formatPoint:function(a){return Array.isArray(a)&&2===a.length?new google.maps.Point(a[0],a[1]):a},overlay:function(a){a=this.map;var b=this.options;try{this.idleOnceCount||(this.kml(a,b),this.directionService(a,b),this.placeMarkers(a,b),this.drawPolyline(a,b),this.drawPolygon(a,b),this.drawCircle(a,b),this.streetView(a,b),this.places(a,b),this.geoLocation(a,b),this.idleOnceCount=!0)}catch(c){console.error(c)}finally{google.maps.event.trigger(a,
"resize")}},bindEvents:function(a,b){var c=this,d={};switch(typeof b){case "function":google.maps.event.clearListeners(a,"click");google.maps.event.addListener(a,"click",b);break;case "object":for(d in b)"function"===typeof b[d]?"created"===d?b[d].call(a):(google.maps.event.clearListeners(a,d),google.maps.event.addListener(a,d,b[d])):b[d].hasOwnProperty("func")&&"function"===typeof b[d].func?b[d].hasOwnProperty("once")&&!0===b[d].once?google.maps.event.addListenerOnce(a,d,b[d].func):(google.maps.event.clearListeners(a,
d),google.maps.event.addListener(a,d,b[d].func)):"function"===typeof b[d]&&(google.maps.event.clearListeners(a,d),google.maps.event.addListener(a,d,b[d]))}a.hasOwnProperty("defaultInfoWindow")&&(google.maps.event.clearListeners(a,"click"),google.maps.event.addListener(a,"click",function(){var b,d;if(c.options.hasOwnProperty("infoWindowAutoClose")&&!0===c.options.infoWindowAutoClose)for(b=0;b<c._markers.length;b+=1)d=c._markers[b],d.hasOwnProperty("infoWindow")&&"function"===typeof d.infoWindow.close&&
d.infoWindow.close();a.infoWindow.open(c.map,a)}))},kml:function(a,b){var c={url:"",map:a,preserveViewport:!1,suppressInfoWindows:!1},d={},e;if(b.hasOwnProperty("kml"))if("string"===typeof b.kml)c.url=b.kml,d=new google.maps.KmlLayer(c),this._kmls.push(d);else if(Array.isArray(b.kml))for(e=0;e<b.kml.length;e+=1)"string"===typeof b.kml[e]?(c.url=b.kml[e],d=new google.maps.KmlLayer(c)):"object"===typeof b.kml[e]&&(c=h.extend({},c,b.kml[e]),d=new google.maps.KmlLayer(c),c.hasOwnProperty("event")&&this.bindEvents(d,
c.event)),this._kmls.push(d)},drawPolyline:function(a,b){var c={},d=[],e={},f={},g={},g={},k=[],l=[],q=0,g={},g={},n=0,D=function(a,b){if(b===google.maps.DirectionsStatus.OK){for(n=0;n<a.routes[0].overview_path.length;n+=1)l.push(a.routes[0].overview_path[n]);e.setPath(l);"function"===typeof c.getDistance&&(f=a.routes[0].legs[0].distance,c.getDistance.call(this,f))}};if(b.hasOwnProperty("polyline")&&Array.isArray(b.polyline))for(q=0;q<b.polyline.length;q+=1)if(c=b.polyline[q],c.hasOwnProperty("coords")&&
Array.isArray(c.coords)){k=new google.maps.MVCArray;for(n=0;n<c.coords.length;n+=1)g=c.coords[n],g=t(g,!0),"function"===typeof g.lat&&k.push(g);g=h.extend({},{strokeColor:c.color||"#FF0000",strokeOpacity:c.opacity||1,strokeWeight:c.width||2},c);e=new google.maps.Polyline(g);this._polylines.push(e);if(2<k.getLength())for(n=0;n<k.length;n+=1)0<n&&k.length-1>n&&d.push({location:k.getAt(n),stopover:!1});c.hasOwnProperty("event")&&this.bindEvents(e,c.event);c.hasOwnProperty("snap")&&!0===c.snap?(g=new google.maps.DirectionsService,
g.route({origin:k.getAt(0),waypoints:d,destination:k.getAt(k.length-1),travelMode:google.maps.DirectionsTravelMode.DRIVING},D)):(e.setPath(k),google.maps.hasOwnProperty("geometry")&&google.maps.geometry.hasOwnProperty("spherical")&&"function"===typeof google.maps.geometry.spherical.computeDistanceBetween&&(f=google.maps.geometry.spherical.computeDistanceBetween(k.getAt(0),k.getAt(k.length-1)),"function"===typeof c.getDistance&&c.getDistance.call(this,f)));e.setMap(a)}},drawPolygon:function(a,b){var c,
d,e,f;if(b.hasOwnProperty("polygon")&&Array.isArray(b.polygon))for(e=0;e<b.polygon.length;e+=1)if(c=[],b.polygon[e].hasOwnProperty("coords")){for(d=0;d<b.polygon[e].coords.length;d+=1)f=b.polygon[e].coords[d],f=t(f,!0),"function"===typeof f.lat&&c.push(f);d=h.extend({},{path:c,strokeColor:b.polygon[e].color||"#FF0000",strokeOpacity:1,strokeWeight:b.polygon[e].width||2,fillColor:b.polygon[e].fillcolor||"#CC0000",fillOpacity:.35},b.polygon[e]);c=new google.maps.Polygon(d);this._polygons.push(c);c.setMap(a);
d.hasOwnProperty("event")&&this.bindEvents(c,d.event)}},drawCircle:function(a,b){var c,d,e={},f;if(b.hasOwnProperty("circle")&&Array.isArray(b.circle))for(f=0;f<b.circle.length;f+=1)d=b.circle[f],c=h.extend({map:a,strokeColor:d.color||"#FF0000",strokeOpacity:d.opacity||.8,strokeWeight:d.width||2,fillColor:d.fillcolor||"#FF0000",fillOpacity:d.fillopacity||.35,radius:d.radius||10,zIndex:100,id:d.hasOwnProperty("id")?d.id:""},d),d.hasOwnProperty("center")&&(e=t(d.center,!0),c.center=e),"function"===
typeof e.lat&&(c=new google.maps.Circle(c),this._circles.push(c),d.hasOwnProperty("event")&&this.bindEvents(c,d.event))},markerIcon:function(a){var b={};if(a.hasOwnProperty("icon")){b=a.icon;if("string"===typeof a.icon)return a.icon;a.icon.hasOwnProperty("url")&&(b.url=a.icon.url);a.icon.hasOwnProperty("size")&&Array.isArray(a.icon.size)&&2===a.icon.size.length&&(b.size=this.formatSize(a.icon.size));a.icon.hasOwnProperty("scaledSize")&&Array.isArray(a.icon.scaledSize)&&2===a.icon.scaledSize.length&&
(b.scaledSize=this.formatSize(a.icon.scaledSize));a.icon.hasOwnProperty("anchor")&&Array.isArray(a.icon.anchor)&&2===a.icon.anchor.length&&(b.anchor=this.formatPoint(a.icon.anchor))}return b},processMarker:function(a,b,c,d){var e=this,f=e.get("marker"),g={},k={},l={};c.hasOwnProperty("position")&&("function"===typeof c.getPosition&&e._bounds.extend(c.position),b.hasOwnProperty("markerFitBounds")&&!0===b.markerFitBounds&&f.length===b.marker.length&&a.fitBounds(e._bounds));c.hasOwnProperty("text")&&
(c.infoWindow=new google.maps.InfoWindow({content:c.text}),c.infoWindow.close(),c.hasOwnProperty("event")&&c.event.hasOwnProperty("click")||(c.defaultInfoWindow=!0),e.bindEvents(c,c.event),c.hasOwnProperty("infoWindowOptions")&&(l=h.extend({},{content:c.infoWindowOptions.hasOwnProperty("content")?c.infoWindowOptions.content:c.text},c.infoWindowOptions),c.infoWindow.setOptions(l),l.hasOwnProperty("event")&&"undefined"!==typeof l.event&&e.bindEvents(c.infoWindow,l.event)));d||(!c.hasOwnProperty("cluster")||
c.hasOwnProperty("cluster")&&!0===c.cluster)&&"function"===typeof e._clusters.addMarker&&e._clusters.addMarker(c);c.hasOwnProperty("newLabel")&&(k={id:c.id,text:c.newLabel,map:a,css:c.hasOwnProperty("newLabelCSS")?c.newLabelCSS.toString():""},e.get({label:[c.id]},function(a){var d=0,f=a.label.length,l={};if(f)for(d=0;d<f;d+=1)l=a.label[d],l.text=c.newLabel,h(l.span).addClass(c.newLabelCSS),l.bindTo("position",c),l.draw();else g=new w(k),g.bindTo("position",c),e._labels.push(g),g.set("visible",c.showLabel),
"object"===typeof g&&!0===b.markerCluster&&google.maps.event.addListener(c,"map_changed",function(){"function"===typeof g.setMap&&g.set("visible",null!==c.getMap())})}));e.bindEvents(c,c.event)},markerControl:function(){var a=this,b=a.options,c={css:"",label:"\u8acb\u9078\u64c7&hellip;",infoWindow:!0,panTo:!0,onChange:""},d;b.hasOwnProperty("markerControl")&&("string"===typeof b.markerControl?d=h(b.markerControl.toString()):(d=b.markerControl.hasOwnProperty("container")?h(b.markerControl.container):
h(b.markerControl),c=h.extend({},c,b.markerControl)),d.length&&a.get("marker",function(b){var f=['<select class="marker-list-control">',"<option>"+c.label+"</option>"];b.forEach(function(a){"undefined"!==typeof a.infoWindow&&a.infoWindow.close();f.push('<option value="'+a.id+'">'+(a.title?a.title:a.id)+"</option>")});f.push("</select>");d.on("change.tinyMap","select",function(){var b=h(this);a.close("marker");this.value.length&&a.get({marker:[this.value]},function(e){e.marker.length&&"undefined"!==
e.marker[0]&&(e=e.marker[0],!0===c.infoWindow&&"undefined"!==typeof e.infoWindow&&"function"===typeof e.infoWindow.open&&e.infoWindow.open(a.map,e),!0===c.panTo&&a.map.panTo(e.getPosition()),"function"===typeof c.onChange&&c.onChange.call(b,e))})}).html(f.join(""));"string"===typeof c.css&&d.find("select").addClass(c.css)}))},placeMarkers:function(a,b,c,d){var e=this,f={},g={maxZoom:null,gridSize:60},k=Array.isArray(b.marker)?b.marker:[],l;"undefined"!==typeof d&&Array.isArray(d)&&d.length&&(k=d);
e.options.hasOwnProperty("markerCluster")&&"function"===typeof MarkerClusterer&&(g=h.extend({},g,b.markerCluster),e._clusters=new MarkerClusterer(a,[],g),g.hasOwnProperty("event")&&e.bindEvents(e._clusters,g.event));k.forEach(function(d,k){var g=t(d.addr,!0),y=e.markerIcon(d),C=!0,E=!1,v={},p={},r="undefined"!==typeof d.id?d.id:d.addr.toString().replace(/\s/g,""),m={id:r,map:a,animation:null,showLabel:!0},m=h.extend({},m,d);"modify"===c&&r&&e.get({marker:[r]},function(a){!Array.isArray(a.marker)||
!a.marker.length||d.hasOwnProperty("forceInsert")&&!0===d.forceInsert||(d=h.extend(a.marker[0],d),"function"===typeof e._clusters.removeMarker&&e._clusters.removeMarker(a.marker[0]),C=!1,E=!0)});d.hasOwnProperty("title")&&(m.title=d.title.toString().replace(/<([^>]+)>/g,""));h.isEmptyObject(y)||(m.icon=y);d.hasOwnProperty("animation")&&"string"===typeof d.animation&&(m.animation=google.maps.Animation[d.animation.toUpperCase()]);"string"===typeof g?(f=new google.maps.Geocoder,f.geocode({address:g},
function(f,g){g===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?l=setTimeout(function(){clearTimeout(l);e.placeMarkers(a,b,c,[d])},e.interval*(k+1)):g===google.maps.GeocoderStatus.OK&&(!C&&E?("function"===typeof d.setPosition&&(d.setPosition(f[0].geometry.location),m.hasOwnProperty("title")&&d.setTitle(m.title),m.hasOwnProperty("icon")&&d.setIcon(m.icon)),p=d):(m.position=f[0].geometry.location,v=b.hasOwnProperty("markerWithLabel")&&!0===b.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(m):
new google.maps.Marker(m):new google.maps.Marker(m),e._markers.push(v),p=v),e.processMarker(a,b,p,c))})):(!C&&E?("function"===typeof d.setPosition&&(d.setPosition(g),m.hasOwnProperty("title")&&d.setTitle(m.title),m.hasOwnProperty("icon")&&d.setIcon(m.icon)),p=d):(m.position=g,v=b.hasOwnProperty("markerWithLabel")&&!0===b.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(m):new google.maps.Marker(m):new google.maps.Marker(m),e._markers.push(v),p=v),e.processMarker(a,b,p,c))});
e.markerControl()},directionService:function(a,b){var c=this,d=new google.maps.DirectionsService;Array.isArray(b.direction)&&b.direction.forEach(function(b){if("undefined"!==typeof b.from&&"undefined"!==typeof b.to){var f={},g=new google.maps.DirectionsRenderer,k=h.extend({},{infoWindow:new google.maps.InfoWindow,map:c.map},b),l=[],q=[],n=[];f.origin=t(b.from,!0);f.destination=t(b.to,!0);f.travelMode=b.hasOwnProperty("travel")&&google.maps.TravelMode[b.travel.toString().toUpperCase()]?google.maps.TravelMode[b.travel.toString().toUpperCase()]:
google.maps.TravelMode.DRIVING;b.hasOwnProperty("panel")&&h(b.panel).length&&(k.panel=h(b.panel).get(0));b.hasOwnProperty("requestExtra")&&b.requestExtra&&(f=h.extend({},f,b.requestExtra));b.hasOwnProperty("optimize")&&(f.optimizeWaypoints=b.optimize);b.hasOwnProperty("waypoint")&&Array.isArray(b.waypoint)&&(b.waypoint.forEach(function(a){var b={stopover:!0};"string"===typeof a||Array.isArray(a)?b.location=t(a,!0):a.hasOwnProperty("location")&&(b.location=t(a.location,!0),b.stopover=a.hasOwnProperty("stopover")?
a.stopover:!0);q.push(a.text||a.toString());a.hasOwnProperty("icon")&&n.push(a.icon.toString());l.push(b)}),f.waypoints=l);d.route(f,function(d,h){h===google.maps.DirectionsStatus.OK&&(d.routes.forEach(function(g,h){b.hasOwnProperty("renderAll")&&!0===b.renderAll&&!0===f.provideRouteAlternatives&&new google.maps.DirectionsRenderer({map:a,directions:d,routeIndex:h});var l=g.legs,p="",y="",m={};b.hasOwnProperty("fromText")&&(p=l[0].start_address=b.fromText);b.hasOwnProperty("toText")&&(1===l.length?
l[0].end_address=b.toText:l[l.length-1].end_address=b.toText,y=b.toText);b.hasOwnProperty("icon")&&(k.suppressMarkers=!0,b.icon.hasOwnProperty("from")&&"string"===typeof b.icon.from&&c.directionServiceMarker(l[0].start_location,{icon:b.icon.from,text:p},k.infoWindow,b),b.icon.hasOwnProperty("to")&&"string"===typeof b.icon.to&&c.directionServiceMarker(l[l.length-1].end_location,{icon:b.icon.to,text:y},k.infoWindow,b));for(p=1;p<l.length;p+=1)b.hasOwnProperty("icon")&&(b.icon.hasOwnProperty("waypoint")&&
"string"===typeof b.icon.waypoint?m.icon=b.icon.waypoint:"string"===typeof n[p-1]&&(m.icon=n[p-1]),m.text=q[p-1],c.directionServiceMarker(l[p].start_location,m,k.infoWindow,b))}),c.bindEvents(g,b.event),g.setOptions(k),g.setDirections(d),c._directions.push(g))})}})},directionServiceMarker:function(a,b,c,d){var e=this,f={},g=h.extend({},{position:a,map:e.map,id:d.hasOwnProperty("id")?d.id:""},b),k=new google.maps.Marker(g);g.hasOwnProperty("text")&&(f=function(){c.setPosition(a);c.setContent(g.text);
c.open(e.map,k)});e._directionsMarkers.push(k);e.bindEvents(k,f)},getDirectionsInfo:function(){var a=[];this.get("direction",function(b){b.forEach(function(b,d){var e=b.getDirections();e.hasOwnProperty("routes")&&"undefined"!==typeof e.routes[0]&&"undefined"!==typeof e.routes[0].legs&&(a[d]=[],e.routes[0].legs.forEach(function(b,c){a[d].push({from:b.start_address,to:b.end_address,distance:b.distance,duration:b.duration})}))})});return a},streetView:function(a,b){var c=b.hasOwnProperty("streetViewObj")?
b.streetViewObj:{},d;"function"===typeof a.getStreetView&&(c.hasOwnProperty("position")?(d=t(c.position,!0),c.position="object"===typeof d?a.getCenter():d):c.position=a.getCenter(),c.hasOwnProperty("pov")&&(c.pov=h.extend({},{heading:0,pitch:0,zoom:1},c.pov)),d=a.getStreetView(),d.setOptions(c),c.hasOwnProperty("event")&&this.bindEvents(d,c.event),c.hasOwnProperty("visible")&&d.setVisible(c.visible))},places:function(a,b){var c=this,d={},d=b.hasOwnProperty("places")?b.places:{},e=h.extend({location:a.getCenter(),
radius:100},d);e.location=t(e.location,!0);"undefined"!==typeof google.maps.places&&(d=new google.maps.places.PlacesService(a),d.nearbySearch(e,function(b,d){d===google.maps.places.PlacesServiceStatus.OK&&(c._places.push(b),e.hasOwnProperty("createMarker")&&!0===e.createMarker&&b.forEach(function(b){b.hasOwnProperty("geometry")&&c._markers.push(new google.maps.Marker({map:a,position:b.geometry.location}))}),e.hasOwnProperty("callback")&&"function"===typeof e.callback&&e.callback.call(b))}))},geoLocation:function(a,
b){try{var c=this,d={},e=navigator.geolocation;e&&(b.hasOwnProperty("geolocation")&&(d=h.extend({},{maximumAge:6E5,timeout:3E3,enableHighAccuracy:!1},b.geolocation)),!0!==b.autoLocation&&"function"!==typeof b.autoLocation||e.watchPosition(function(d){"undefined"!==typeof d&&"coords"in d&&"latitude"in d.coords&&"longitude"in d.coords&&(a.panTo(new google.maps.LatLng(d.coords.latitude,d.coords.longitude)),"function"===typeof b.autoLocation&&b.autoLocation.call(c,d))},function(a){console.error(a)},d))}catch(f){}},
panTo:function(a){var b=this.map,c={},d={};null!==b&&"undefined"!==typeof b&&(c=t(a,!0),"string"===typeof c?(d=new google.maps.Geocoder,d.geocode({address:c},function(a,c){c===google.maps.GeocoderStatus.OK&&"function"===typeof b.panTo&&Array.isArray(a)&&a.length?a[0].hasOwnProperty("geometry")&&b.panTo(a[0].geometry.location):console.error(c)})):"function"===typeof b.panTo&&b.panTo(c));return h(this.container)},close:function(a,b){var c=this.get(a),d={},e="";c.hasOwnProperty("map")&&delete c.map;
Array.isArray(c)?d[a]=c:d=c;try{for(e in d)Array.isArray(d[e])&&d[e].forEach(function(a){a.hasOwnProperty("infoWindow")&&"function"===typeof a.infoWindow.close&&a.infoWindow.close()});"function"===typeof b&&b.call(this)}catch(f){console.warn(f)}finally{return h(this.container)}},clear:function(a,b){function c(a,b){"function"===typeof a.setMap&&f._directionsMarkers[b].setMap(null)}function d(a){"direction"===n&&(g.forEach(c),f._directionsMarkers.filter(function(a){return"undefined"!==typeof a}));"function"===
typeof a.set&&a.set("visible",!1);"function"===typeof a.setMap&&a.setMap(null);-1!==f[q].indexOf(a)&&delete f[q][f[q].indexOf(a)]}function e(a){return"undefined"!==typeof a}var f=this,g=f._directionsMarkers,k=f.get(a),l={},q="",n="";"undefined"!==typeof k&&"undefined"!==typeof k.map&&delete k.map;Array.isArray(k)?l[a]=k:l=k;try{for(n in l)Array.isArray(l[n])&&(q="_"+n.toString().toLowerCase()+"s",l[n].forEach(d),f[q]=f[q].filter(e));"function"===typeof b&&b.call(this)}catch(D){console.warn(D)}finally{return h(f.container)}},
get:function(a,b){function c(b){(0===a[f].length||-1!==a[f].indexOf(l)||"undefined"!==typeof b.id&&0<b.id.length&&-1!==b.id.indexOf(a[f]))&&e[f].push(b)}var d=[],e={},f={},g="",k="",l=0;"undefined"===typeof a&&(a={marker:[],label:[],polygon:[],polyline:[],circle:[],direction:[],kml:[],cluster:[],bound:[]});try{if("string"===typeof a)if(-1!==a.indexOf(","))for(d=a.replace(/\s/gi,"").split(","),l=0;l<d.length;l+=1)k=d[l].toString().toLowerCase(),"map"===k?e[k]=this.map:(g="_"+k+"s",e[k]=this[g]);else"map"===
a.toString().toLowerCase()?e=this.map:(g="_"+a.toString().toLowerCase()+"s",e=this[g]);else{for(f in a)Array.isArray(a[f])&&(g="_"+f.toString().toLowerCase()+"s",Array.isArray(this[g])&&(e[f]=[],this[g].forEach(c)));e.map=this.map}"function"===typeof b&&b.call(this,e);return e}catch(h){console.error(h)}finally{return e}},modify:function(a){var b=[],c=[["kml","kml"],["marker","placeMarkers"],["direction","directionService"],["polyline","drawPolyline"],["polygon","drawPolygon"],["circle","drawCircle"],
["streetView","streetView"],["markerFitBounds","markerFitBounds"],["places","places"]],d,e=this.map;if("undefined"!==typeof a){for(d=0;d<c.length;d+=1)a.hasOwnProperty(c[d][0])&&b.push(c[d][1]);if(null!==e){if(b.length)for(d=0;d<b.length;d+=1)"function"===typeof this[b[d]]&&("streetView"===b[d]&&(a.streetViewObj=a.streetView,delete a.streetView),this[b[d]](e,a,"modify"));else e.setOptions(a);a.hasOwnProperty("event")&&this.bindEvents(e,a.event);google.maps.event.trigger(e,"resize")}}return h(this.container)},
query:function(a,b){var c=this,d=new google.maps.Geocoder,e=t(a),f={};"string"===typeof e?f.address=e:f={location:{lat:parseFloat(e.lat,10),lng:parseFloat(e.lng,10)}};d.geocode(f,function(d,e){try{if(e===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)setTimeout(function(){c.query(a,b)},c.interval);else if(e===google.maps.GeocoderStatus.OK&&Array.isArray(d)){if(0<d.length&&d[0].hasOwnProperty("geometry"))if("function"===typeof b)b.call(c,d[0]);else return d[0]}else console.error("Geocoder Error Code: "+
e)}catch(f){console.error(f)}})},destroy:function(){var a=h(this.container);a.length&&h.removeData(this.container,"tinyMap");return a.empty()},getKML:function(a){var b=h.extend({},{marker:!0,polyline:!0,polygon:!0,circle:!0,direction:!0,download:!1},a),c="<Placemark> <name><![CDATA[#NAME#]]\x3e</name> <Snippet></Snippet> <description><![CDATA[]]\x3e</description> <styleUrl>#style1</styleUrl> <ExtendedData></ExtendedData> #DATA# </Placemark>".split(" "),d="<Placemark> <styleUrl>#style1</styleUrl> <name><![CDATA[#NAME#]]\x3e</name> <Polygon> <tessellate>1</tessellate> <extrude>1</extrude> <altitudeMode>clampedToGround</altitudeMode> <outerBoundaryIs> <LinearRing> <coordinates>#LATLNG#</coordinates> </LinearRing> </outerBoundaryIs> </Polygon> </Placemark>".split(" "),
e="",f="",g="",k="",l="";a="";this.get("marker,polyline,polygon,circle,direction",function(a){var h="";!0===b.marker&&"undefined"!==typeof a.marker&&a.marker.forEach(function(a){h=[a.getPosition().lng(),a.getPosition().lat()].join();e+=c.join("").replace(/#NAME#/gi,"Markers").replace(/#DATA#/gi,"<Point><coordinates>#LATLNG#,0.000000</coordinates></Point>".replace(/#LATLNG#/gi,h))});!0===b.polyline&&"undefined"!==typeof a.polyline&&a.polyline.forEach(function(a){h="";a.getPath().getArray().forEach(function(a){h+=
[a.lng(),a.lat(),"0.000000\n"].join()});f+=c.join("").replace(/#NAME#/gi,"Polylines").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,h))});!0===b.polygon&&"undefined"!==typeof a.polygon&&a.polygon.forEach(function(a){h="";a.getPath().getArray().forEach(function(a){h+=[a.lng(),a.lat(),"0.000000\n"].join()});g+=d.join("").replace(/#NAME#/gi,"Polygons").replace(/#LATLNG#/gi,h)});!0===b.circle&&"undefined"!==typeof a.circle&&
a.circle.forEach(function(a){h="";var b=Math.PI/180,c=180/Math.PI,c=a.getRadius()/6378137*c,b=c/Math.cos(a.getCenter().lat()*b),e,f,g;for(g=0;65>g;g+=1)e=g/32*Math.PI,f=a.getCenter().lng()+b*Math.cos(e),e=a.getCenter().lat()+c*Math.sin(e),h+=[f,e,"0.000000\n"].join();k+=d.join("").replace(/#NAME#/gi,"Circles").replace(/#LATLNG#/gi,h)});!0===b.direction&&"undefined"!==typeof a.direction&&a.direction.forEach(function(a){a=a.getDirections();a.hasOwnProperty("routes")&&Array.isArray(a.routes)&&"undefined"!==
typeof a.routes[0]&&"undefined"!==typeof a.routes[0].legs&&Array.isArray(a.routes[0].legs)&&a.routes[0].legs.forEach(function(a){Array.isArray(a.steps)&&a.steps.forEach(function(a){h="";Array.isArray(a.path)&&a.path.forEach(function(a){h+=[a.lng(),a.lat(),"0.000000\n"].join()});l+=c.join("").replace(/#NAME#/gi,"Directions").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,h))})})})});a='<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://earth.google.com/kml/2.2"><Document><name><![CDATA[jQuery tinyMap Plugin]]\x3e</name><description><![CDATA[]]\x3e</description><Style id="style1"><PolyStyle><color>50F05A14</color><colorMode>normal</colorMode><fill>1</fill><outline>1</outline></PolyStyle><IconStyle><Icon><href>https://maps.google.com/mapfiles/kml/paddle/grn-circle_maps.png</href></Icon></IconStyle></Style>#PLACEMARKS#</Document></kml>'.replace(/#NAME#/gi,
"").replace(/#PLACEMARKS#/gi,e+f+g+k+l);if(!0===b.download)u.open("data:application/vnd.google-earth.kml+xml;charset=utf-8;base64,"+u.btoa(u.decodeURIComponent(u.encodeURIComponent(a))));else return a},init:function(){var a=this,b={},c={},c=h.extend({},x),d=c.api.split("?")[0],e="",b={},f={},g;try{delete c.api,delete c.clusterer,delete c.withLabel,c=h.param(c)}catch(k){}F||"undefined"!==typeof u.google||(b=r.createElement("script"),b.setAttribute("src",[d,c].join("?")),(r.getElementsByTagName("head")[0]||
r.documentElement).appendChild(b),F=!0,b=null);if("object"===typeof u.google){z(a.options);!G&&a.options.hasOwnProperty("markerCluster")&&!1!==a.options.markerCluster&&"undefined"===typeof MarkerClusterer&&(b=r.createElement("script"),b.setAttribute("src",x.clusterer),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(b),G=!0,b=null);!H&&a.options.hasOwnProperty("markerWithLabel")&&!0===a.options.markerWithLabel&&"undefined"===typeof MarkerWithLabel&&(b=r.createElement("script"),b.setAttribute("src",
x.withLabel),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(b),H=!0,b=null);a._bounds=new google.maps.LatLngBounds;w.prototype=new google.maps.OverlayView;w.prototype.onAdd=function(){var a=this;null!==a.div&&(a.div.appendTo(h(a.getPanes().overlayLayer)),a.listeners=[google.maps.event.addListener(a,"visible_changed",function(){a.draw()}),google.maps.event.addListener(a,"position_changed",function(){a.draw()}),google.maps.event.addListener(a,"visible_changed",function(){a.draw()}),
google.maps.event.addListener(a,"clickable_changed",function(){a.draw()}),google.maps.event.addListener(a,"text_changed",function(){a.draw()}),google.maps.event.addListener(a,"zindex_changed",function(){a.draw()})])};w.prototype.draw=function(){var a=this.getProjection(),b={};try{null!==this.div&&a&&((b=a.fromLatLngToDivPixel(this.get("position")))&&this.div.css({left:b.x+"px",top:b.y+"px",display:this.get("visible")?"block":"none"}),this.text&&this.span.html(this.text.toString()))}catch(c){console.error(c)}};
w.prototype.onRemove=function(){h(this.div).remove();this.div=null};for(f in a.options)a.options.hasOwnProperty(f)&&(b=a.options[f],/ControlOptions/g.test(f)&&b.hasOwnProperty("position")&&"string"===typeof b.position&&(a.options[f].position=google.maps.ControlPosition[b.position.toUpperCase()]));a.googleMapOptions=a.options;a.options.hasOwnProperty("streetView")&&(a.googleMapOptions.streetViewObj=a.options.streetView,delete a.googleMapOptions.streetView);a.googleMapOptions.center=t(a.options.center,
!0);a.options.hasOwnProperty("styles")&&("string"===typeof a.options.styles&&B.hasOwnProperty(a.options.styles)?a.googleMapOptions.styles=B[a.options.styles]:Array.isArray(a.options.styles)&&(a.googleMapOptions.styles=a.options.styles));"string"===typeof a.options.center?(c=new google.maps.Geocoder,c.geocode({address:a.options.center},function(b,c){try{c===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?setTimeout(function(){a.init()},a.interval):c===google.maps.GeocoderStatus.OK&&Array.isArray(b)?0<
b.length&&b[0].hasOwnProperty("geometry")&&(a.googleMapOptions.center=b[0].geometry.location,a.map=new google.maps.Map(a.container,a.googleMapOptions),g="undefined"!==typeof a.options.event?a.options.event:{},a.mapIdleEvent(g)):(e=(a.options.notFound||c).toString(),a.container.innerHTML=h("<div/>").text(e).html(),console.error("Geocoder Error Code: "+c))}catch(d){console.error(d)}})):(a.map=new google.maps.Map(a.container,a.googleMapOptions),g="undefined"!==typeof a.options.event?a.options.event:
{},a.mapIdleEvent(g))}},mapIdleEvent:function(a){var b=this;a.hasOwnProperty("idle")?"undefined"!==a.idle.func&&"function"===typeof a.idle.func&&"undefined"!==typeof a.idle.once?!0===a.idle.once?google.maps.event.addListenerOnce(b.map,"idle",function(){b.overlay();a.idle.func.apply(this,arguments);delete a.idle;b.bindEvents(b.map,a)}):google.maps.event.addListener(b.map,"idle",function(){b.overlay();a.idle.func.apply(this,arguments);b.bindEvents(b.map,a)}):"function"===typeof a.idle&&google.maps.event.addListener(b.map,
"idle",function(){b.overlay();a.idle.apply(this,arguments);b.bindEvents(b.map,a)}):google.maps.event.addListenerOnce(b.map,"idle",function(){b.overlay();b.bindEvents(b.map,a)})}};h.fn.tinyMapConfigure=function(a){x=h.extend(x,a)};h.fn.tinyMap=function(a){var b={},c=[],d=arguments;return"string"===typeof a?(this.each(function(){b=h.data(this,"tinyMap");b instanceof A&&"function"===typeof b[a]&&(c=b[a].apply(b,Array.prototype.slice.call(d,1)))}),"undefined"!==typeof c?c:this):this.each(function(){h.data(this,
"tinyMap")||h.data(this,"tinyMap",new A(this,a))})}})(window.jQuery||{},window,document);
